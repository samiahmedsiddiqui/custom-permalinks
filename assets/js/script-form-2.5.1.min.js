!function(){"use strict";let r="",n="",a=!1;function s(e){e.target&&(e.target.style.color="#000")}function i(e){var t;e.target&&(t=document.getElementById("original-permalink"),document.getElementById("custom_permalink").value=e.target.value,""!==e.target.value&&e.target.value!==t.value||(e.target.value=t.value,e.target.style.color="#ddd"))}function d(){if(r&&wpApiSettings&&wpApiSettings.nonce){var e=document.getElementsByClassName("edit-post-post-link__preview-label"),t=document.getElementById("custom_permalinks_home_url");let i="";e&&e[0]&&e[0].parentNode.classList.add("cp-permalink-hidden"),(n=r.isSavingMetaBoxes())!==a&&!n&&t&&(e=wp.data.select("core/editor").getEditedPostAttribute("id"),i=new XMLHttpRequest,a=n,i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var e=JSON.parse(i.responseText);var a=document.getElementById("custom_permalinks_home_url"),o=document.getElementById("custom-permalinks-add");let t="",n="";if(document.getElementById("custom_permalink").value=e.custom_permalink,""===e.custom_permalink&&(e.custom_permalink=e.original_permalink),t=e.preview_permalink?a.value+e.preview_permalink:a.value+e.custom_permalink,document.getElementById("custom-permalinks-post-slug").value=e.custom_permalink,document.getElementById("original-permalink").value=e.original_permalink,document.querySelector("#view-post-btn a")&&(n=document.querySelector("#view-post-btn a").href,document.querySelector("#view-post-btn a").href=t),document.querySelector("a.editor-post-preview")&&(document.querySelector("a.editor-post-preview").href=t),""!==n){n=n.replace(/\//g,"/");let e=0;for(var l=document.querySelectorAll("body a"),r=new RegExp(n,"g"),s=l.length;e<s;)l[e]&&l[e].href&&(l[e].href=l[e].href.replace(r,t)),e+=1}o&&"add"===o.value&&(document.getElementById("custom-permalinks-edit-box").style.display=""),document.querySelector(".components-notice__content a")&&(document.querySelector(".components-notice__content a").href="/"+e.custom_permalink)}},i.open("GET",t.value+"wp-json/custom-permalinks/v1/get-permalink/"+e,!0),i.setRequestHeader("Cache-Control","private, max-age=0, no-cache"),i.setRequestHeader("X-WP-NONCE",wpApiSettings.nonce),i.send()),a=n}}function c(){var e=document.getElementsByClassName("edit-post-post-link__preview-label");e&&e[0]&&e[0].parentNode.classList.add("cp-permalink-hidden")}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementsByClassName("edit-post-post-link__preview-label");let t=0;var n=document.getElementById("custom-permalinks-edit-box"),a=document.getElementById("custom-permalinks-post-slug"),o="";let l=0;if(a&&(a.addEventListener("focus",s),a.addEventListener("blur",i)),n&&""===document.querySelector("#custom-permalinks-edit-box .inside").innerHTML.trim()&&(n.style.display="none"),wp.data)for(a=document.getElementById("custom-permalinks-add"),(o=document.querySelectorAll(".edit-post-sidebar .components-panel__header"))&&o.length&&(l=o.length),a&&"add"===a.value&&(n.style.display="none"),r=wp.data.select("core/edit-post"),wp.data.subscribe(d),e&&e[0]&&e[0].parentNode.classList.add("cp-permalink-hidden"),n.classList.contains("closed")&&n.classList.remove("closed");t<l;)o[t].addEventListener("click",c),t+=1})}();